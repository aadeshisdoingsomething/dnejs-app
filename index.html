<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Neural Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: 'oklch(0.15 0 0 / <alpha-value>)',
                        foreground: 'oklch(0.98 0 0 / <alpha-value>)',
                        card: 'oklch(0.2 0 0 / <alpha-value>)',
                        cardForeground: 'oklch(0.98 0 0 / <alpha-value>)',
                        popover: 'oklch(0.2 0 0 / <alpha-value>)',
                        popoverForeground: 'oklch(0.98 0 0 / <alpha-value>)',
                        primary: {
                            DEFAULT: 'oklch(0.55 0.25 300 / <alpha-value>)',
                            foreground: 'oklch(0.98 0 0 / <alpha-value>)'
                        },
                        secondary: {
                            DEFAULT: 'oklch(0.25 0 0 / <alpha-value>)',
                            foreground: 'oklch(0.98 0 0 / <alpha-value>)'
                        },
                        muted: {
                            DEFAULT: 'oklch(0.25 0 0 / <alpha-value>)',
                            foreground: 'oklch(0.7 0 0 / <alpha-value>)'
                        },
                        accent: {
                            DEFAULT: 'oklch(0.3 0.1 300 / <alpha-value>)',
                            foreground: 'oklch(0.98 0 0 / <alpha-value>)'
                        },
                        destructive: {
                            DEFAULT: 'oklch(0.4 0.15 25 / <alpha-value>)',
                            foreground: 'oklch(0.98 0 0 / <alpha-value>)'
                        },
                        border: 'oklch(0.25 0 0 / <alpha-value>)',
                        input: 'oklch(0.25 0 0 / <alpha-value>)',
                        ring: 'oklch(0.55 0.25 300 / <alpha-value>)'
                    },
                    borderRadius: {
                        sm: 'calc(0.5rem - 4px)',
                        md: 'calc(0.5rem - 2px)',
                        lg: '0.5rem',
                        xl: 'calc(0.5rem + 4px)',
                        '2xl': 'calc(0.5rem + 8px)',
                        '3xl': 'calc(0.5rem + 12px)'
                    }
                }
            }
        }
    </script>
    <link rel="icon" type="image/svg+xml" href="logo.svg">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="bg-background text-foreground font-sans selection:bg-indigo-500/30">

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6 h-screen p-4 md:p-8">

        <!-- SIDEBAR -->
        <div class="lg:col-span-4 flex flex-col gap-4 overflow-y-auto custom-scrollbar">

            <!-- Stats & Controls -->
            <div class="bg-card border border-border p-6 rounded-3xl space-y-4 shadow-xl shrink-0">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <a href="https://dnejs.vercel.app"
                            class="cursor-pointer transition-transform hover:scale-105 inline-block"
                            title="Back to Landing Page">
                            <img src="logo.svg" alt="Dynamic Neural Engine Logo"
                                class="w-8 h-8 rounded-lg shadow-[0_0_8px_rgba(88,28,135,0.6)]">
                        </a>
                        <h1 class="font-black text-xl tracking-tight italic">NEURAL ENGINE</h1>
                    </div>
                    <button id="btn-visualizer"
                        class="p-2 bg-secondary hover:bg-secondary/80 rounded-xl transition-colors text-primary"
                        title="View Network Matrices">
                        <i data-lucide="network" class="w-[18px] h-[18px]"></i>
                    </button>
                </div>

                <div id="cloud-status"
                    class="text-[10px] text-amber-500 flex items-center gap-1 font-bold uppercase tracking-widest">
                    <i data-lucide="cloud-off" class="w-3 h-3"></i> Connecting...
                </div>

                <div class="grid grid-cols-2 gap-2">
                    <div class="bg-black/40 p-3 rounded-2xl border border-border">
                        <p class="text-[10px] text-muted-foreground uppercase font-bold mb-1">Loss Rate</p>
                        <p id="ui-loss" class="text-xl font-mono text-primary">1.00000</p>
                    </div>
                    <div class="bg-black/40 p-3 rounded-2xl border border-border">
                        <p class="text-[10px] text-muted-foreground uppercase font-bold mb-1">Target Loss</p>
                        <input id="ui-target-loss" type="number" step="0.001" value="0.005"
                            class="w-full bg-transparent text-xl font-mono text-foreground outline-none">
                    </div>
                </div>

                <div class="grid grid-cols-1 gap-2">
                    <button id="btn-nuke-data"
                        class="w-full py-3 rounded-xl font-bold tracking-widest text-xs flex items-center justify-center gap-2 transition-all bg-destructive/10 text-destructive hover:bg-destructive/20 hover:text-destructive/80">
                        <i data-lucide="bomb" class="w-[14px] h-[14px]"></i> NUKE CORE
                    </button>
                </div>

                <button id="btn-train"
                    class="w-full py-4 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all bg-primary text-white hover:bg-primary/90">
                    <i data-lucide="play" class="w-[18px] h-[18px]" id="train-icon"></i>
                    <span id="train-text">TRAIN UNTIL TARGET</span>
                </button>
            </div>

            <!-- Inject / Import -->
            <div class="bg-card border border-border p-6 rounded-3xl flex-1 flex flex-col shadow-xl min-h-0">
                <div class="flex gap-2 mb-4">
                    <button id="tab-manual"
                        class="flex-1 py-2 rounded-lg text-xs font-bold transition-colors bg-primary/20 text-primary">Manual</button>
                    <button id="tab-json"
                        class="flex-1 py-2 rounded-lg text-xs font-bold transition-colors bg-secondary text-muted-foreground hover:text-neutral-300">JSON
                        Import</button>
                </div>

                <!-- Manual Tab -->
                <div id="view-manual" class="space-y-4 flex-1 flex flex-col min-h-0">
                    <div class="space-y-2 shrink-0">
                        <input id="teach-q" placeholder="User says..."
                            class="w-full bg-black/50 border border-border rounded-xl p-3 text-sm focus:border-primary outline-none">
                        <input id="teach-a" placeholder="AI should respond..."
                            class="w-full bg-black/50 border border-border rounded-xl p-3 text-sm focus:border-primary outline-none">
                        <button id="btn-teach"
                            class="w-full bg-secondary hover:bg-secondary/80 py-3 rounded-xl text-xs font-bold transition-colors flex items-center justify-center gap-2">
                            <i data-lucide="plus-circle" class="w-[14px] h-[14px]"></i> ATTACH TO MEMORY
                        </button>
                    </div>

                    <div class="pt-4 mt-4 border-t border-border flex-1 flex flex-col min-h-0">
                        <div class="flex justify-between items-center mb-3 shrink-0">
                            <p id="corpus-stats" class="text-[10px] text-muted-foreground font-bold uppercase">Corpus
                                (0) /
                                Vocab (0)</p>
                            <i data-lucide="book" class="w-3 h-3 text-muted-foreground"></i>
                        </div>
                        <div id="corpus-list" class="space-y-1 overflow-y-auto pr-2 custom-scrollbar flex-1">
                            <!-- Populated via JS -->
                        </div>
                    </div>
                </div>

                <!-- JSON Tab -->
                <div id="view-json" class="space-y-3 flex-1 flex flex-col min-h-0 hidden">
                    <div class="shrink-0 flex justify-between items-center">
                        <p class="text-[10px] text-muted-foreground">Requires array of <code
                                class="text-primary">{q, a}</code> pairs.</p>
                        <button id="btn-paste-example"
                            class="text-[10px] text-primary hover:text-indigo-300 font-bold">Paste Example</button>
                    </div>
                    <textarea id="json-input"
                        placeholder="[\n  { &quot;q&quot;: &quot;input&quot;, &quot;a&quot;: &quot;output&quot; }\n]"
                        class="w-full flex-1 bg-black/50 border border-border rounded-xl p-3 text-xs font-mono focus:border-primary outline-none resize-none custom-scrollbar"></textarea>
                    <p id="json-error" class="text-xs text-destructive font-bold hidden"></p>
                    <button id="btn-import-json"
                        class="w-full shrink-0 bg-secondary hover:bg-secondary/80 py-3 rounded-xl text-xs font-bold transition-colors flex items-center justify-center gap-2">
                        <i data-lucide="code" class="w-[14px] h-[14px]"></i> IMPORT CORPUS
                    </button>
                </div>
            </div>
        </div>

        <!-- MAIN CHAT -->
        <div
            class="lg:col-span-8 flex flex-col bg-card border border-border rounded-[2.5rem] overflow-hidden shadow-2xl relative">
            <div
                class="p-6 border-b border-border flex justify-between items-center bg-card/50 backdrop-blur-md shrink-0">
                <div class="flex items-center gap-3">
                    <div class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]"></div>
                    <span class="text-xs font-bold uppercase tracking-widest text-muted-foreground">Live Inference
                        Module</span>
                </div>
                <button id="btn-clear-chat" class="text-muted-foreground hover:text-destructive transition-colors">
                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                </button>
            </div>

            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 md:p-8 space-y-6 custom-scrollbar flex flex-col">
                <!-- Messages appended here via JS -->
            </div>

            <form id="chat-form" class="p-6 bg-card border-t border-border shrink-0">
                <div class="relative flex items-center">
                    <input id="chat-input" type="text" placeholder="Query the math..." autocomplete="off"
                        class="w-full bg-black border border-border rounded-2xl pl-6 pr-16 py-5 text-sm focus:border-primary focus:ring-1 focus:ring-ring outline-none transition-all">
                    <button type="submit"
                        class="absolute right-3 p-3 bg-primary hover:bg-primary/90 text-white rounded-xl transition-all active:scale-95 shadow-lg shadow-primary/20">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
                <p class="text-[9px] text-center text-muted-foreground mt-4 uppercase tracking-[0.2em]">
                    Reinforcement Learning Enabled â€¢ Pure JS Inference
                </p>
            </form>
        </div>
    </div>

    <!-- VISUALIZER OVERLAY -->
    <div id="visualizer-overlay"
        class="hidden fixed inset-0 bg-background/95 backdrop-blur-sm z-50 flex flex-col p-6 animate-in fade-in duration-200">
        <div class="flex justify-between items-center mb-6 shrink-0 max-w-7xl mx-auto w-full">
            <div>
                <h2 class="text-2xl font-black italic tracking-tight text-white flex items-center gap-3">
                    <i data-lucide="network" class="text-primary"></i> MATRIX VISUALIZER
                </h2>
                <p class="text-muted-foreground text-sm mt-1">Live projection of synaptic weights.</p>
            </div>
            <button id="btn-close-vis"
                class="p-3 bg-card hover:bg-destructive/20 text-muted-foreground hover:text-destructive rounded-xl transition-all">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>

        <div id="vis-content"
            class="flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-8 pb-10 max-w-7xl mx-auto w-full">
            <!-- Generated via JS -->
        </div>
    </div>

    <!-- App Logic -->
    <script type="module" src="js/main.js"></script>
</body>

</html>